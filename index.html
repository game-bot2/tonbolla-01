<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tonbolla Game</title>
    <link href="https://fonts.googleapis.com/css2?family=Raleway:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Raleway', sans-serif;
            background-color: #F5F0E6;
            color: #333333;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        /* Header */
        #header {
            display: flex;
            justify-content: space-between;
            padding: 15px 20px;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            background: rgba(245, 240, 230, 0.9);
        }
        
        #wallet-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        #wallet-amount {
            background: rgba(255,255,255,0.8);
            padding: 5px 10px;
            border-radius: 15px;
            border: 1px solid #ddd;
        }
        
        #connect-wallet {
            background: #333;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 15px;
            cursor: pointer;
        }
        
        #language-selector {
            position: relative;
        }
        
        #language-btn {
            background: transparent;
            border: none;
            cursor: pointer;
            font-weight: bold;
        }
        
        #language-options {
            display: none;
            position: absolute;
            right: 0;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            padding: 10px;
            min-width: 120px;
            max-height: 300px;
            overflow-y: auto;
        }
        
        .language-option {
            padding: 5px 0;
            cursor: pointer;
        }
        
        /* Splash Screen */
        #splash {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100%;
            font-size: 3rem;
            font-weight: bold;
            animation: fadeIn 1s;
        }
        
        /* Main Menu */
        #main-menu {
            display: none;
            flex: 1;
            padding: 80px 20px 70px;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        
        .timer-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 40px;
        }
        
        .timer {
            font-size: 2.5rem;
            margin-bottom: 20px;
        }
        
        .timer-label {
            font-size: 1rem;
            margin-bottom: 20px;
            color: #666;
        }
        
        /* Bottom Menu */
        #bottom-menu {
            display: flex;
            justify-content: center;
            gap: 10px;
            position: fixed;
            bottom: 10px;
            left: 0;
            right: 0;
            padding: 10px;
            background: rgba(255,255,255,0.9);
            backdrop-filter: blur(5px);
            border-top: 1px solid #eee;
            z-index: 1000;
        }
        
        .menu-button {
            width: 40px;
            height: 40px;
            background-color: transparent;
            color: #333333;
            border: 2px solid #333333;
            border-radius: 50%;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .menu-button:hover {
            background-color: #333333;
            color: #F5F0E6;
        }
        
        .menu-button.active {
            background-color: #333333;
            color: #F5F0E6;
        }
        
        #home-btn {
            width: 50px;
            height: 50px;
            font-size: 1.2rem;
            position: relative;
            top: -15px;
        }
        
        /* Pages */
        .page {
            display: none;
            position: fixed;
            top: 60px;
            left: 0;
            right: 0;
            bottom: 60px;
            background-color: #F5F0E6;
            padding: 20px;
            overflow-y: auto;
        }
        
        .page-title {
            text-align: center;
            margin-bottom: 30px;
            font-size: 1.5rem;
            font-weight: 600;
        }
        
        /* Buy Cards Page */
        .cards-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .tonbolla-card {
            background: white;
            border-radius: 15px;
            padding: 15px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            border: 2px solid #e0e0e0;
            position: relative;
        }
        
        .card-header {
            background: linear-gradient(135deg, #3498db, #2c3e50);
            color: white;
            padding: 10px;
            text-align: center;
            border-radius: 8px;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .card-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 5px;
            margin: 10px 0;
        }
        
        .number-cell {
            background: #f8f9fa;
            border-radius: 5px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            border: 1px solid #e0e0e0;
        }
        
        .empty-cell {
            background: transparent;
            border: none;
        }
        
        .card-footer {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px dashed #ccc;
        }
        
        .buy-button {
            background: #3498db;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            width: 100%;
        }
        
        .buy-button:disabled {
            background: #cccccc;
            cursor: not-allowed;
        }
        
        .sold-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(255,255,255,0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 13px;
            font-weight: bold;
            color: #e74c3c;
        }
        
        /* Winners Page */
        #winners-page .tonbolla-card {
            margin: 10px auto;
            max-width: 500px;
        }
        
        /* Game Play Page */
        #game-play-page {
            display: none;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }
        
        #current-number {
            font-size: 3rem;
            font-weight: bold;
            margin: 20px 0;
            color: #2c3e50;
            text-align: center;
            background: white;
            padding: 10px 20px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        #called-numbers {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 20px 0;
            justify-content: center;
        }
        
        .called-number {
            background: #3498db;
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }
        
        #game-card-container {
            margin-top: 30px;
            max-width: 400px;
            width: 100%;
        }
        
        #announcement {
            font-size: 1.2rem;
            margin-top: 20px;
            text-align: center;
            min-height: 30px;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 5px;
        }
        
        .number-cell {
            cursor: pointer;
            transition: all 0.2s;
            position: relative;
        }
        
        .number-cell:hover {
            background: #e9ecef !important;
        }
        
        .marked-number {
            background: #d4edda;
        }
        
        .bean {
            position: absolute;
            width: 20px;
            height: 20px;
            background: #e74c3c;
            border-radius: 50%;
            top: -5px;
            right: -5px;
        }
        
        /* Invite Page - Clean Design */
        .invite-container {
            max-width: 500px;
            margin: 0 auto;
            padding: 20px;
            text-align: center;
        }
        
        .invite-code {
            font-size: 2.2rem;
            font-weight: bold;
            letter-spacing: 3px;
            margin: 30px 0;
            padding: 15px 25px;
            background: white;
            border-radius: 10px;
            border: 2px solid #333;
            display: inline-block;
        }
        
        .invite-stats {
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 30px 0;
            font-size: 1.1rem;
        }
        
        .friends-icon {
            font-size: 1.8rem;
            margin-right: 12px;
        }
        
        .friends-count {
            font-weight: bold;
            font-size: 1.8rem;
        }
        
        .invite-info {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin: 25px 0;
            text-align: left;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        
        .reward-list {
            list-style: none;
            padding: 0;
            margin: 20px 0;
        }
        
        .reward-list li {
            padding: 12px 15px;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
        }
        
        .reward-list li:last-child {
            border-bottom: none;
        }
        
        .reward-amount {
            font-weight: bold;
        }
        
        .share-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 25px;
        }
        
        .share-button {
            padding: 12px 25px;
            border-radius: 30px;
            border: 1px solid #333;
            background: transparent;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s;
        }
        
        .share-button:hover {
            background: #333;
            color: white;
        }
        
        /* Task Button (Separate above bottom menu) */
        #task-button-container {
            position: fixed;
            bottom: 70px;
            left: 20px;
            z-index: 1000;
            display: none; /* Hidden by default */
        }
        
        #task-btn {
            width: 50px;
            height: 50px;
            background-color: #333;
            color: #F5F0E6;
            border: none;
            border-radius: 50%;
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        
        #task-btn:hover {
            transform: scale(1.1);
            background-color: #2c3e50;
        }
        
        /* اضافه کردن استایل برای مودال جدید */
        .task-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.7);
            z-index: 2000;
            justify-content: center;
            align-items: center;
        }
        
        .task-content {
            background: #F5F0E6;
            border-radius: 15px;
            padding: 30px;
            max-width: 90%;
            width: 500px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }
        
        .task-title {
            font-size: 1.8rem;
            margin-bottom: 20px;
            color: #2c3e50;
        }
        
        .task-item {
            display: flex;
            align-items: center;
            background: white;
            margin: 15px 0;
            padding: 15px;
            border-radius: 10px;
            text-align: left;
            box-shadow: 0 3px 6px rgba(0,0,0,0.1);
        }
        
        .task-icon {
            font-size: 2rem;
            margin-right: 15px;
            color: #3498db;
        }
        
        .task-info {
            flex: 1;
        }
        
        .task-link {
            display: block;
            margin-top: 5px;
            color: #3498db;
            word-break: break-all;
        }
        
        .join-btn {
            background: #2c3e50;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 10px;
        }
        
        .joined {
            background: #d4edda;
            color: #155724;
            padding: 5px 10px;
            border-radius: 5px;
            font-weight: bold;
        }
        
        .task-footer {
            margin-top: 25px;
        }
        
        .close-task {
            background: #e74c3c;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        .pulse {
            animation: pulse 0.5s ease-in-out;
        }
    </style>
</head>
<body>
    <!-- Header with Wallet and Language -->
    <div id="header">
        <div id="wallet-info">
            <div id="wallet-amount">0 TON</div>
            <button id="connect-wallet">Connect Wallet</button>
        </div>
        
        <div id="language-selector">
            <button id="language-btn">EN</button>
            <div id="language-options">
                <div class="language-option" data-lang="en">English</div>
                <div class="language-option" data-lang="fa">فارسی (Persian)</div>
                <div class="language-option" data-lang="hi">हिन्दी (Hindi)</div>
                <div class="language-option" data-lang="ko">한국어 (Korean)</div>
                <div class="language-option" data-lang="zh">中文 (Chinese)</div>
                <div class="language-option" data-lang="fr">Français (French)</div>
                <div class="language-option" data-lang="de">Deutsch (German)</div>
                <div class="language-option" data-lang="ru">Русский (Russian)</div>
                <div class="language-option" data-lang="ar">العربية (Arabic)</div>
            </div>
        </div>
    </div>
    
    <!-- Splash Screen -->
    <div id="splash">TONBOLLA</div>
    
    <!-- Main Menu -->
    <div id="main-menu">
        <div class="timer-container">
            <div class="timer-label">Next game starts in:</div>
            <div class="timer" id="timer">01:00:00</div>
            <button class="menu-button" id="play-button" style="width: auto; padding: 0 20px; border-radius: 30px;">
                <i class="fas fa-play"></i> Enter Game
            </button>
        </div>
    </div>
    
    <!-- Buy Cards Page -->
    <div id="buy-cards-page" class="page">
        <div class="page-title">Buy Tonbolla Cards (1 TON each)</div>
        <div class="cards-container" id="cards-container">
            <!-- Cards will be inserted here by JavaScript -->
        </div>
    </div>
    
    <!-- Show Cards Page -->
    <div id="show-cards-page" class="page">
        <div class="page-title">Your Purchased Cards</div>
        <div class="cards-container" id="owned-cards-container">
            <!-- Owned cards will be inserted here -->
        </div>
    </div>
    
    <!-- Winners Page -->
    <div id="winners-page" class="page">
        <div class="page-title">Recent Winners</div>
        <div id="winners-list">
            <!-- Winners will be inserted here -->
        </div>
    </div>
    
    <!-- Game Play Page -->
    <div id="game-play-page" class="page">
        <div class="page-title">Tonbolla Game</div>
        <div id="current-number">-</div>
        <div style="text-align: center; margin: 10px 0;">Called Numbers:</div>
        <div id="called-numbers"></div>
        <div id="announcement"></div>
        <div id="game-card-container">
            <!-- Player's card will be shown here -->
        </div>
    </div>
    
    <!-- Invite Friends Page - Clean Design -->
    <div id="invite-page" class="page">
        <div class="page-title">Invite Friends</div>
        <div class="invite-container">
            <p style="margin-bottom: 25px; font-size: 1.1rem;">
                Share your invite code with friends to increase your prize when you win!
            </p>
            
            <div class="invite-code">TONBOLLA</div>
            
            <div class="invite-stats">
                <i class="fas fa-user-friends friends-icon"></i>
                <div>
                    You have invited <span class="friends-count">0</span> friends
                </div>
            </div>
            
            <div class="invite-info">
                <h3 style="margin-bottom: 15px; text-align: center;">How it works:</h3>
                <ul class="reward-list">
                    <li>
                        <span>Base prize for winning:</span>
                        <span class="reward-amount">2 TON</span>
                    </li>
                    <li>
                        <span>Invite 10 friends:</span>
                        <span class="reward-amount">2.5 TON prize</span>
                    </li>
                    <li>
                        <span>Invite 20 friends:</span>
                        <span class="reward-amount">3 TON prize</span>
                    </li>
                    <li>
                        <span>Invite 40 friends:</span>
                        <span class="reward-amount">3.5 TON prize</span>
                    </li>
                    <li>
                        <span>Invite 60+ friends:</span>
                        <span class="reward-amount">4 TON prize</span>
                    </li>
                </ul>
            </div>
            
            <div class="share-buttons">
                <button class="share-button">
                    <i class="fab fa-telegram"></i> Telegram
                </button>
                <button class="share-button" id="copy-invite">
                    <i class="fas fa-copy"></i> Copy Link
                </button>
            </div>
        </div>
    </div>

    <!-- Task Button (Separate above bottom menu) -->
    <div id="task-button-container">
        <button id="task-btn" title="Task">
            <i class="fas fa-tasks"></i>
        </button>
    </div>

    <!-- اضافه کردن مودال جدید برای Task -->
    <div id="task-modal" class="task-modal">
        <div class="task-content">
            <div class="task-title">Join Tonbolla Community</div>
            
            <div class="task-item">
                <i class="fab fa-telegram task-icon"></i>
                <div class="task-info">
                    <strong>Tonbolla Group</strong>
                    <a href="https://t.me/tonbolla_game" target="_blank" class="task-link">https://t.me/tonbolla_game</a>
                    <button class="join-btn" id="join-group-btn">I Joined</button>
                    <div id="group-status"></div>
                </div>
            </div>
            
            <div class="task-item">
                <i class="fab fa-telegram task-icon"></i>
                <div class="task-info">
                    <strong>Tonbolla Channel</strong>
                    <a href="https://t.me/tonbolla_game" target="_blank" class="task-link">https://t.me/tonbolla_game</a>
                    <button class="join-btn" id="join-channel-btn">I Joined</button>
                    <div id="channel-status"></div>
                </div>
            </div>
            
            <div class="task-footer">
                <button class="close-task" id="close-task-btn">Close</button>
            </div>
        </div>
    </div>

    <!-- Bottom Menu -->
    <div id="bottom-menu">
        <button class="menu-button" id="buy-card-btn" title="Buy Card">
            <i class="fas fa-shopping-cart"></i>
        </button>
        <button class="menu-button" id="show-cards-btn" title="My Cards">
            <i class="fas fa-eye"></i>
        </button>
        <button class="menu-button active" id="home-btn" title="Home">
            <i class="fas fa-home"></i>
        </button>
        <button class="menu-button" id="winners-btn" title="Winners">
            <i class="fas fa-trophy"></i>
        </button>
        <button class="menu-button" id="invite-btn" title="Invite">
            <i class="fas fa-user-plus"></i>
        </button>
    </div>

    <script>
        // Game State
        const gameState = {
            language: 'en',
            walletConnected: false,
            tonBalance: 0,
            ownedCards: [],
            allCards: [],
            winners: [
                { id: 1, address: 'EQAB...1234', prize: '10 TON' },
                { id: 2, address: 'EQCD...5678', prize: '5 TON' },
                { id: 3, address: 'EQEF...9012', prize: '3 TON' }
            ],
            currentPage: 'main-menu',
            hasPurchasedCard: false,
            gameInProgress: false,
            calledNumbers: [],
            currentPlayerCard: null,
            markedNumbers: [],
            invitedFriends: 0,
            hasJoinedGroup: localStorage.getItem('hasJoinedGroup') === 'true',
            hasJoinedChannel: localStorage.getItem('hasJoinedChannel') === 'true'
        };
        
        // Translations (fixed for all languages)
        const translations = {
            en: {
                wallet: {
                    connect: "Connect Wallet",
                    connected: "Connected",
                    balance: "Balance: {balance} TON"
                },
                menu: {
                    buyCard: "Buy Card",
                    showCards: "My Cards",
                    home: "Home",
                    winners: "Winners",
                    invite: "Invite",
                    play: "Enter Game",
                    task: "Task"
                },
                timer: "Next game starts in:",
                buyCards: {
                    title: "Buy Tonbolla Cards (1 TON each)",
                    buyButton: "Buy",
                    sold: "SOLD"
                },
                showCards: {
                    title: "Your Purchased Cards"
                },
                winners: {
                    title: "Recent Winners"
                },
                invite: {
                    title: "Invite Friends",
                    description: "Share your invite code and increase your prize!",
                    copied: "Invite link copied!",
                    success: "Friends invited successfully!",
                    prizeInfo: "Prize based on invites:"
                },
                game: {
                    title: "Tonbolla Game",
                    newNumber: "New number: {number}",
                    matchFound: "Match found on your card!",
                    noMatch: "No match on your card",
                    gameOver: "Game Over!"
                },
                task: {
                    title: "Join Tonbolla Community",
                    joinGroup: "Join Telegram Group",
                    joinChannel: "Join Telegram Channel",
                    mustJoin: "You must join both Tonbolla Telegram group and channel before buying a card!"
                }
            },
            fa: {
                wallet: {
                    connect: "اتصال کیف پول",
                    connected: "متصل شد",
                    balance: "موجودی: {balance} TON"
                },
                menu: {
                    buyCard: "خرید کارت",
                    showCards: "کارت های من",
                    home: "خانه",
                    winners: "برندگان",
                    invite: "دعوت دوستان",
                    play: "ورود به بازی",
                    task: "تسک"
                },
                timer: "بازی بعدی شروع می‌شود در:",
                buyCards: {
                    title: "خرید کارت تنبلا (هر کارت 1 TON)",
                    buyButton: "خرید",
                    sold: "خریداری شده"
                },
                showCards: {
                    title: "کارت‌های خریداری شده"
                },
                winners: {
                    title: "برندگان اخیر"
                },
                invite: {
                    title: "دعوت دوستان",
                    description: "کد دعوت خود را به اشتراک بگذارید و جایزه خود را افزایش دهید!",
                    copied: "لینک دعوت کپی شد!",
                    success: "دوستان با موفقیت دعوت شدند!",
                    prizeInfo: "جایزه بر اساس دعوت‌ها:"
                },
                game: {
                    title: "بازی تنبلا",
                    newNumber: "عدد جدید: {number}",
                    matchFound: "عدد در کارت شما پیدا شد!",
                    noMatch: "عددی در کارت شما یافت نشد",
                    gameOver: "پایان بازی!"
                },
                task: {
                    title: "عضویت در جامعه تنبلا",
                    joinGroup: "عضویت در گروه تلگرام",
                    joinChannel: "عضویت در کانال تلگرام",
                    mustJoin: "قبل از خرید کارت باید در گروه و کانال تلگرام تنبلا عضو شوید!"
                }
            },
            hi: {
                wallet: {
                    connect: "वॉलेट कनेक्ट करें",
                    connected: "कनेक्टेड",
                    balance: "शेष: {balance} TON"
                },
                menu: {
                    buyCard: "कार्ड खरीदें",
                    showCards: "मेरे कार्ड",
                    home: "होम",
                    winners: "विजेता",
                    invite: "आमंत्रित करें",
                    play: "खेल में प्रवेश",
                    task: "कार्य"
                },
                timer: "अगला खेल शुरू होता है:",
                buyCards: {
                    title: "टोनबोला कार्ड खरीदें (प्रत्येक 1 TON)",
                    buyButton: "खरीदें",
                    sold: "बिक गया"
                },
                showCards: {
                    title: "आपके खरीदे गए कार्ड"
                },
                winners: {
                    title: "हाल के विजेता"
                },
                invite: {
                    title: "मित्रों को आमंत्रित करें",
                    description: "अपना आमंत्रण कोड साझा करें और अपना पुरस्कार बढ़ाएँ!",
                    copied: "आमंत्रण लिंक कॉपी किया गया!",
                    success: "मित्रों को सफलतापूर्वक आमंत्रित किया गया!",
                    prizeInfo: "आमंत्रणों के आधार पर पुरस्कार:"
                },
                game: {
                    title: "टोनबोला खेल",
                    newNumber: "नया नंबर: {number}",
                    matchFound: "आपके कार्ड पर मिलान मिला!",
                    noMatch: "आपके कार्ड पर कोई मिलान नहीं",
                    gameOver: "खेल समाप्त!"
                },
                task: {
                    title: "टोनबोला समुदाय में शामिल हों",
                    joinGroup: "टेलीग्राम ग्रुप में शामिल हों",
                    joinChannel: "टेलीग्राम चैनल में शामिल हों",
                    mustJoin: "कार्ड खरीदने से पहले आपको टोनबोला टेलीग्राम ग्रुप और चैनल दोनों में शामिल होना होगा!"
                }
            },
            ko: {
                wallet: {
                    connect: "지갑 연결",
                    connected: "연결됨",
                    balance: "잔액: {balance} TON"
                },
                menu: {
                    buyCard: "카드 구매",
                    showCards: "내 카드",
                    home: "홈",
                    winners: "우승자",
                    invite: "초대하기",
                    play: "게임 참가",
                    task: "작업"
                },
                timer: "다음 게임 시작까지:",
                buyCards: {
                    title: "Tonbolla 카드 구매 (개당 1 TON)",
                    buyButton: "구매",
                    sold: "판매 완료"
                },
                showCards: {
                    title: "구매한 카드"
                },
                winners: {
                    title: "최근 우승자"
                },
                invite: {
                    title: "친구 초대",
                    description: "초대 코드를 공유하고 상금을 늘리세요!",
                    copied: "초대 링크 복사됨!",
                    success: "친구 초대 성공!",
                    prizeInfo: "초대에 따른 상금:"
                },
                game: {
                    title: "Tonbolla 게임",
                    newNumber: "새 번호: {number}",
                    matchFound: "카드에 일치하는 번호 발견!",
                    noMatch: "카드에 일치하는 번호 없음",
                    gameOver: "게임 종료!"
                },
                task: {
                    title: "Tonbolla 커뮤니티 가입",
                    joinGroup: "텔레그램 그룹 가입",
                    joinChannel: "텔레그램 채널 가입",
                    mustJoin: "카드를 구매하기 전에 Tonbolla 텔레그램 그룹과 채널에 모두 가입해야 합니다!"
                }
            },
            zh: {
                wallet: {
                    connect: "连接钱包",
                    connected: "已连接",
                    balance: "余额: {balance} TON"
                },
                menu: {
                    buyCard: "购买卡牌",
                    showCards: "我的卡牌",
                    home: "首页",
                    winners: "获胜者",
                    invite: "邀请",
                    play: "进入游戏",
                    task: "任务"
                },
                timer: "下一局游戏开始:",
                buyCards: {
                    title: "购买Tonbolla卡牌 (每张1 TON)",
                    buyButton: "购买",
                    sold: "已售出"
                },
                showCards: {
                    title: "您购买的卡牌"
                },
                winners: {
                    title: "近期获胜者"
                },
                invite: {
                    title: "邀请朋友",
                    description: "分享您的邀请码来增加您的奖金！",
                    copied: "邀请链接已复制！",
                    success: "成功邀请朋友！",
                    prizeInfo: "基于邀请的奖金:"
                },
                game: {
                    title: "Tonbolla游戏",
                    newNumber: "新号码: {number}",
                    matchFound: "在您的卡牌上找到匹配！",
                    noMatch: "您的卡牌上没有匹配",
                    gameOver: "游戏结束！"
                },
                task: {
                    title: "加入Tonbolla社区",
                    joinGroup: "加入Telegram群组",
                    joinChannel: "加入Telegram频道",
                    mustJoin: "购买卡牌前您必须加入Tonbolla的Telegram群组和频道！"
                }
            },
            fr: {
                wallet: {
                    connect: "Connecter le portefeuille",
                    connected: "Connecté",
                    balance: "Solde: {balance} TON"
                },
                menu: {
                    buyCard: "Acheter une carte",
                    showCards: "Mes cartes",
                    home: "Accueil",
                    winners: "Gagnants",
                    invite: "Inviter",
                    play: "Entrer dans le jeu",
                    task: "Tâche"
                },
                timer: "Prochain jeu commence dans:",
                buyCards: {
                    title: "Acheter des cartes Tonbolla (1 TON chacune)",
                    buyButton: "Acheter",
                    sold: "VENDUE"
                },
                showCards: {
                    title: "Vos cartes achetées"
                },
                winners: {
                    title: "Gagnants récents"
                },
                invite: {
                    title: "Inviter des amis",
                    description: "Partagez votre code d'invitation pour augmenter votre prix !",
                    copied: "Lien d'invitation copié !",
                    success: "Amis invités avec succès !",
                    prizeInfo: "Prix basé sur les invitations:"
                },
                game: {
                    title: "Jeu Tonbolla",
                    newNumber: "Nouveau numéro: {number}",
                    matchFound: "Correspondance trouvée sur votre carte !",
                    noMatch: "Aucune correspondance sur votre carte",
                    gameOver: "Jeu terminé !"
                },
                task: {
                    title: "Rejoindre la communauté Tonbolla",
                    joinGroup: "Rejoindre le groupe Telegram",
                    joinChannel: "Rejoindre la chaîne Telegram",
                    mustJoin: "Vous devez rejoindre le groupe et la chaîne Telegram de Tonbolla avant d'acheter une carte !"
                }
            },
            de: {
                wallet: {
                    connect: "Wallet verbinden",
                    connected: "Verbunden",
                    balance: "Guthaben: {balance} TON"
                },
                menu: {
                    buyCard: "Karte kaufen",
                    showCards: "Meine Karten",
                    home: "Startseite",
                    winners: "Gewinner",
                    invite: "Einladen",
                    play: "Spiel betreten",
                    task: "Aufgabe"
                },
                timer: "Nächstes Spiel startet in:",
                buyCards: {
                    title: "Tonbolla-Karten kaufen (je 1 TON)",
                    buyButton: "Kaufen",
                    sold: "VERKAUFT"
                },
                showCards: {
                    title: "Ihre gekauften Karten"
                },
                winners: {
                    title: "Letzte Gewinner"
                },
                invite: {
                    title: "Freunde einladen",
                    description: "Teilen Sie Ihren Einladungscode, um Ihren Preis zu erhöhen!",
                    copied: "Einladungslink kopiert!",
                    success: "Freunde erfolgreich eingeladen!",
                    prizeInfo: "Preis basierend auf Einladungen:"
                },
                game: {
                    title: "Tonbolla-Spiel",
                    newNumber: "Neue Nummer: {number}",
                    matchFound: "Übereinstimmung auf Ihrer Karte gefunden!",
                    noMatch: "Keine Übereinstimmung auf Ihrer Karte",
                    gameOver: "Spiel beendet!"
                },
                task: {
                    title: "Tonbolla-Community beitreten",
                    joinGroup: "Telegram-Gruppe beitreten",
                    joinChannel: "Telegram-Kanal beitreten",
                    mustJoin: "Sie müssen der Tonbolla Telegram-Gruppe und dem Kanal beitreten, bevor Sie eine Karte kaufen können!"
                }
            },
            ru: {
                wallet: {
                    connect: "Подключить кошелек",
                    connected: "Подключено",
                    balance: "Баланс: {balance} TON"
                },
                menu: {
                    buyCard: "Купить карту",
                    showCards: "Мои карты",
                    home: "Главная",
                    winners: "Победители",
                    invite: "Пригласить",
                    play: "Войти в игру",
                    task: "Задание"
                },
                timer: "Следующая игра начнется через:",
                buyCards: {
                    title: "Купить карты Tonbolla (1 TON каждая)",
                    buyButton: "Купить",
                    sold: "ПРОДАНО"
                },
                showCards: {
                    title: "Ваши купленные карты"
                },
                winners: {
                    title: "Последние победители"
                },
                invite: {
                    title: "Пригласить друзей",
                    description: "Поделитесь своим кодом приглашения, чтобы увеличить свой приз!",
                    copied: "Ссылка приглашения скопирована!",
                    success: "Друзья успешно приглашены!",
                    prizeInfo: "Приз на основе приглашений:"
                },
                game: {
                    title: "Игра Tonbolla",
                    newNumber: "Новый номер: {number}",
                    matchFound: "Совпадение найдено на вашей карте!",
                    noMatch: "На вашей карте нет совпадений",
                    gameOver: "Игра окончена!"
                },
                task: {
                    title: "Присоединяйтесь к сообществу Tonbolla",
                    joinGroup: "Присоединиться к группе в Telegram",
                    joinChannel: "Присоединиться к каналу в Telegram",
                    mustJoin: "Вы должны присоединиться к группе и каналу Tonbolla в Telegram, прежде чем покупать карту!"
                }
            },
            ar: {
                wallet: {
                    connect: "ربط المحفظة",
                    connected: "متصل",
                    balance: "الرصيد: {balance} TON"
                },
                menu: {
                    buyCard: "شراء بطاقة",
                    showCards: "بطاقاتي",
                    home: "الصفحة الرئيسية",
                    winners: "الفائزون",
                    invite: "دعوة",
                    play: "الدخول إلى اللعبة",
                    task: "مهمة"
                },
                timer: "تبدأ اللعبة التالية بعد:",
                buyCards: {
                    title: "شراء بطاقات Tonbolla (1 TON لكل منها)",
                    buyButton: "شراء",
                    sold: "تم البيع"
                },
                showCards: {
                    title: "البطاقات التي اشتريتها"
                },
                winners: {
                    title: "الفائزون الأخيرون"
                },
                invite: {
                    title: "دعوة الأصدقاء",
                    description: "شارك رمز الدعوة الخاص بك لزيادة جائزتك!",
                    copied: "تم نسخ رابط الدعوة!",
                    success: "تمت دعوة الأصدقاء بنجاح!",
                    prizeInfo: "الجائزة بناءً على الدعوات:"
                },
                game: {
                    title: "لعبة Tonbolla",
                    newNumber: "رقم جديد: {number}",
                    matchFound: "تم العثور على تطابق في بطاقتك!",
                    noMatch: "لا يوجد تطابق في بطاقتك",
                    gameOver: "انتهت اللعبة!"
                },
                task: {
                    title: "انضم إلى مجتمع Tonbolla",
                    joinGroup: "انضم إلى مجموعة Telegram",
                    joinChannel: "انضم إلى قناة Telegram",
                    mustJoin: "يجب أن تنضم إلى مجموعة وقناة Tonbolla على Telegram قبل شراء بطاقة!"
                }
            }
        };
        
        // Initialize the app
        function init() {
            // Generate all unique cards once
            gameState.allCards = generateTonbollaCards();
            
            // Hide splash screen after 2 seconds
            setTimeout(() => {
                document.getElementById('splash').style.display = 'none';
                showPage('main-menu');
                startTimer();
            }, 2000);
            
            // Set up wallet connection
            document.getElementById('connect-wallet').addEventListener('click', toggleWalletConnection);
            
            // Set up language selector
            document.getElementById('language-btn').addEventListener('click', toggleLanguageMenu);
            document.querySelectorAll('.language-option').forEach(option => {
                option.addEventListener('click', () => changeLanguage(option.dataset.lang));
            });
            
            // Set up menu buttons
            document.getElementById('home-btn').addEventListener('click', () => showPage('main-menu'));
            document.getElementById('buy-card-btn').addEventListener('click', () => showPage('buy-cards-page'));
            document.getElementById('show-cards-btn').addEventListener('click', () => showPage('show-cards-page'));
            document.getElementById('winners-btn').addEventListener('click', () => showPage('winners-page'));
            document.getElementById('invite-btn').addEventListener('click', () => showPage('invite-page'));
            document.getElementById('play-button').addEventListener('click', startGame);
            
            // Set up task button
            document.getElementById('task-btn').addEventListener('click', showTaskModal);
            
            // Set up task modal buttons
            document.getElementById('join-group-btn').addEventListener('click', function() {
                gameState.hasJoinedGroup = true;
                localStorage.setItem('hasJoinedGroup', 'true');
                updateTaskModal();
            });
            
            document.getElementById('join-channel-btn').addEventListener('click', function() {
                gameState.hasJoinedChannel = true;
                localStorage.setItem('hasJoinedChannel', 'true');
                updateTaskModal();
            });
            
            document.getElementById('close-task-btn').addEventListener('click', function() {
                document.getElementById('task-modal').style.display = 'none';
            });
            
            // Set up copy invite button
            document.getElementById('copy-invite').addEventListener('click', function() {
                copyInviteCode();
                simulateInvite();
            });
            
            // Initial render
            updateUI();
        }
        
        // Show specific page
        function showPage(pageId) {
            // Hide all pages
            document.querySelectorAll('.page, #main-menu').forEach(el => {
                el.style.display = 'none';
            });
            
            // Show selected page
            if (pageId === 'main-menu') {
                document.getElementById('main-menu').style.display = 'flex';
            } else {
                document.getElementById(pageId).style.display = pageId === 'game-play-page' ? 'flex' : 'block';
            }
            
            // Show/hide task button
            if (pageId === 'main-menu') {
                document.getElementById('task-button-container').style.display = 'block';
            } else {
                document.getElementById('task-button-container').style.display = 'none';
            }
            
            // Update active button
            document.querySelectorAll('#bottom-menu .menu-button').forEach(btn => {
                btn.classList.remove('active');
            });
            
            if (pageId === 'main-menu') {
                document.getElementById('home-btn').classList.add('active');
            } else if (pageId === 'buy-cards-page') {
                document.getElementById('buy-card-btn').classList.add('active');
                loadBuyCardsPage();
            } else if (pageId === 'show-cards-page') {
                document.getElementById('show-cards-btn').classList.add('active');
                loadShowCardsPage();
            } else if (pageId === 'winners-page') {
                document.getElementById('winners-btn').classList.add('active');
                loadWinnersPage();
            } else if (pageId === 'invite-page') {
                document.getElementById('invite-btn').classList.add('active');
            } else if (pageId === 'game-play-page') {
                // No button active during game play
            }
            
            // Update current page
            gameState.currentPage = pageId;
        }
        
        // Show task modal
        function showTaskModal() {
            const modal = document.getElementById('task-modal');
            modal.style.display = 'flex';
            updateTaskModal();
        }
        
        // Update task modal status
        function updateTaskModal() {
            const groupStatus = document.getElementById('group-status');
            const channelStatus = document.getElementById('channel-status');
            
            const t = translations[gameState.language].task;
            
            if (gameState.hasJoinedGroup) {
                groupStatus.innerHTML = '<div class="joined">✓ Joined</div>';
                document.getElementById('join-group-btn').style.display = 'none';
            } else {
                groupStatus.innerHTML = '';
                document.getElementById('join-group-btn').style.display = 'block';
                document.getElementById('join-group-btn').textContent = t.joinGroup;
            }
            
            if (gameState.hasJoinedChannel) {
                channelStatus.innerHTML = '<div class="joined">✓ Joined</div>';
                document.getElementById('join-channel-btn').style.display = 'none';
            } else {
                channelStatus.innerHTML = '';
                document.getElementById('join-channel-btn').style.display = 'block';
                document.getElementById('join-channel-btn').textContent = t.joinChannel;
            }
        }
        
        // Timer function - Updated to use UTC
        function startTimer() {
            // Get current UTC time
            const now = new Date();
            const currentUTCHours = now.getUTCHours();
            const currentUTCMinutes = now.getUTCMinutes();
            const currentUTCSeconds = now.getUTCSeconds();
            
            // Calculate seconds until next full hour (UTC)
            let secondsUntilNextHour = 3600 - (currentUTCMinutes * 60 + currentUTCSeconds);
            
            function updateTimer() {
                const hours = Math.floor(secondsUntilNextHour / 3600);
                const minutes = Math.floor((secondsUntilNextHour % 3600) / 60);
                const secs = secondsUntilNextHour % 60;
                
                document.getElementById('timer').textContent = 
                    `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
                
                if (secondsUntilNextHour <= 0) {
                    document.getElementById('play-button').disabled = false;
                    // Reset for next hour
                    secondsUntilNextHour = 3600;
                }
                
                secondsUntilNextHour--;
                setTimeout(updateTimer, 1000);
            }
            
            updateTimer();
        }
        
        // Start the game
        function startGame() {
            if (!gameState.hasPurchasedCard) {
                alert("You need to purchase a card first!");
                showPage('buy-cards-page');
                return;
            }
            
            // Get the player's card
            gameState.currentPlayerCard = gameState.allCards.find(card => 
                card.id === gameState.ownedCards[gameState.ownedCards.length - 1]
            );
            
            gameState.gameInProgress = true;
            gameState.calledNumbers = [];
            gameState.markedNumbers = [];
            
            showPage('game-play-page');
            displayPlayerCard();
            startNumberCalling();
        }
        
        // Display player's card in game view
        function displayPlayerCard() {
            const container = document.getElementById('game-card-container');
            container.innerHTML = '';
            
            const card = gameState.currentPlayerCard;
            if (!card) return;
            
            const cardEl = document.createElement('div');
            cardEl.className = 'tonbolla-card';
            
            let gridHTML = '';
            card.numbers.forEach((num, index) => {
                const isMarked = gameState.markedNumbers.includes(index);
                gridHTML += num 
                    ? `<div class="number-cell ${isMarked ? 'marked-number' : ''}" data-index="${index}" data-number="${num}">
                        ${num}
                        ${isMarked ? '<div class="bean"></div>' : ''}
                       </div>`
                    : `<div class="number-cell empty-cell"></div>`;
            });
            
            cardEl.innerHTML = `
                <div class="card-header">Your Card #${card.id}</div>
                <div class="card-grid">
                    ${gridHTML}
                </div>
            `;
            
            // Add click event to number cells
            cardEl.querySelectorAll('.number-cell').forEach(cell => {
                if (cell.dataset.number) {
                    cell.addEventListener('click', () => markNumber(cell));
                }
            });
            
            container.appendChild(cardEl);
        }
        
        // Mark a number on the card
        function markNumber(cell) {
            const currentNumber = document.getElementById('current-number').textContent;
            const cellNumber = cell.dataset.number;
            const index = cell.dataset.index;
            
            if (currentNumber === cellNumber && !gameState.markedNumbers.includes(parseInt(index))) {
                gameState.markedNumbers.push(parseInt(index));
                displayPlayerCard();
                
                const t = translations[gameState.language].game;
                document.getElementById('announcement').textContent = t.matchFound;
            }
        }
        
        // Start calling numbers every 5 seconds
        function startNumberCalling() {
            // Initial call
            callNextNumber();
            
            // Set interval for subsequent calls
            gameState.numberCallInterval = setInterval(callNextNumber, 5000);
        }
        
        // Call the next random number
        function callNextNumber() {
            // Generate a random number between 10-99 that hasn't been called yet
            const availableNumbers = Array.from({length: 90}, (_, i) => i + 10)
                .filter(num => !gameState.calledNumbers.includes(num));
            
            if (availableNumbers.length === 0) {
                endGame();
                return;
            }
            
            const randomIndex = Math.floor(Math.random() * availableNumbers.length);
            const calledNumber = availableNumbers[randomIndex];
            gameState.calledNumbers.push(calledNumber);
            
            // Display the called number
            const currentNumberEl = document.getElementById('current-number');
            currentNumberEl.textContent = calledNumber;
            currentNumberEl.classList.add('pulse');
            
            // Add to called numbers list
            updateCalledNumbersDisplay();
            
            setTimeout(() => {
                currentNumberEl.classList.remove('pulse');
            }, 500);
            
            // Clear previous announcement
            document.getElementById('announcement').textContent = '';
        }
        
        // Update the called numbers display
        function updateCalledNumbersDisplay() {
            const container = document.getElementById('called-numbers');
            container.innerHTML = '';
            
            gameState.calledNumbers.forEach(num => {
                const numEl = document.createElement('div');
                numEl.className = 'called-number';
                numEl.textContent = num;
                container.appendChild(numEl);
            });
        }
        
        // End the game
        function endGame() {
            clearInterval(gameState.numberCallInterval);
            const t = translations[gameState.language].game;
            document.getElementById('announcement').textContent = t.gameOver;
            gameState.gameInProgress = false;
        }
        
        // Toggle wallet connection
        function toggleWalletConnection() {
            gameState.walletConnected = !gameState.walletConnected;
            
            if (gameState.walletConnected) {
                // Simulate connecting to wallet
                gameState.tonBalance = Math.floor(Math.random() * 100);
            } else {
                gameState.tonBalance = 0;
            }
            
            updateUI();
        }
        
        // Toggle language menu
        function toggleLanguageMenu() {
            const options = document.getElementById('language-options');
            options.style.display = options.style.display === 'block' ? 'none' : 'block';
        }
        
        // Change language
        function changeLanguage(lang) {
            gameState.language = lang;
            document.getElementById('language-btn').textContent = lang.toUpperCase();
            document.getElementById('language-options').style.display = 'none';
            updateUI();
        }
        
        // Copy invite code
        function copyInviteCode() {
            const inviteCode = "TONBOLLA";
            navigator.clipboard.writeText(inviteCode).then(() => {
                const t = translations[gameState.language].invite;
                alert(t.copied);
            });
        }
        
        // Simulate inviting friends
        function simulateInvite() {
            gameState.invitedFriends += 5;
            updateInviteStats();
            
            // Display success message
            const t = translations[gameState.language].invite;
            alert(`${t.success} +5 friends! Total invited: ${gameState.invitedFriends}`);
        }
        
        // Update invite stats display
        function updateInviteStats() {
            document.querySelector('.friends-count').textContent = gameState.invitedFriends;
        }
        
        // Generate Tonbolla cards (4x4 grid with 12 numbers and 4 empty cells)
        function generateTonbollaCards() {
            const cards = [];
            const allNumbers = Array.from({length: 90}, (_, i) => i + 10);
            
            for (let cardId = 1; cardId <= 100; cardId++) {
                // Create a copy of all numbers and shuffle
                const shuffledNumbers = [...allNumbers].sort(() => Math.random() - 0.5);
                
                // Take first 12 numbers for this card
                const cardNumbers = shuffledNumbers.slice(0, 12);
                
                // Create 4x4 grid with 4 empty cells
                const grid = Array(16).fill(null);
                const positions = [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15];
                const numberPositions = [...positions].sort(() => Math.random() - 0.5).slice(0, 12);
                
                numberPositions.forEach((pos, idx) => {
                    grid[pos] = cardNumbers[idx];
                });
                
                cards.push({
                    id: cardId,
                    numbers: grid,
                    sold: false
                });
            }
            
            return cards;
        }
        
        // Load buy cards page
        function loadBuyCardsPage() {
            const container = document.getElementById('cards-container');
            container.innerHTML = '';
            
            // Display all 100 cards
            gameState.allCards.forEach(card => {
                const cardEl = document.createElement('div');
                cardEl.className = 'tonbolla-card';
                
                let gridHTML = '';
                card.numbers.forEach(num => {
                    gridHTML += num 
                        ? `<div class="number-cell">${num}</div>`
                        : `<div class="number-cell empty-cell"></div>`;
                });
                
                const isOwned = gameState.ownedCards.includes(card.id);
                const isSold = card.sold || isOwned;
                
                cardEl.innerHTML = `
                    <div class="card-header">Card #${card.id}</div>
                    <div class="card-grid">
                        ${gridHTML}
                    </div>
                    <div class="card-footer">
                        <button class="buy-button" data-card-id="${card.id}" ${isSold ? 'disabled' : ''}>
                            ${isSold ? translations[gameState.language].buyCards.sold : translations[gameState.language].buyCards.buyButton}
                        </button>
                    </div>
                    ${isSold ? `<div class="sold-overlay">${translations[gameState.language].buyCards.sold}</div>` : ''}
                `;
                
                // Add buy button event if not sold
                if (!isSold) {
                    cardEl.querySelector('.buy-button').addEventListener('click', function() {
                        buyCard(parseInt(this.dataset.cardId));
                    });
                }
                
                container.appendChild(cardEl);
            });
        }
        
        // Buy a card
        function buyCard(cardId) {
            if (!gameState.walletConnected) {
                alert("Please connect your wallet first");
                return;
            }
            
            // Check if user has joined Telegram group and channel
            if (!gameState.hasJoinedGroup || !gameState.hasJoinedChannel) {
                const t = translations[gameState.language].task;
                alert(t.mustJoin);
                showTaskModal();
                return;
            }
            
            if (gameState.tonBalance < 1) {
                alert("Not enough TON balance");
                return;
            }
            
            if (gameState.hasPurchasedCard) {
                alert("You can only purchase one card per game");
                return;
            }
            
            // Find the card
            const card = gameState.allCards.find(c => c.id === cardId);
            if (!card || card.sold) {
                alert("This card is no longer available");
                return;
            }
            
            // Mark as sold
            card.sold = true;
            
            // Simulate purchase
            gameState.tonBalance -= 1;
            gameState.ownedCards.push(cardId);
            gameState.hasPurchasedCard = true;
            
            updateUI();
            loadBuyCardsPage();
            alert("Card purchased successfully!");
        }
        
        // Load show cards page
        function loadShowCardsPage() {
            const container = document.getElementById('owned-cards-container');
            container.innerHTML = '';
            
            if (gameState.ownedCards.length === 0) {
                const t = translations[gameState.language].showCards;
                container.innerHTML = `<p>${t.title} - You have no cards yet</p>`;
                return;
            }
            
            gameState.ownedCards.forEach(cardId => {
                const card = gameState.allCards.find(c => c.id === cardId);
                if (!card) return;
                
                const cardEl = document.createElement('div');
                cardEl.className = 'tonbolla-card';
                
                let gridHTML = '';
                card.numbers.forEach(num => {
                    gridHTML += num 
                        ? `<div class="number-cell">${num}</div>`
                        : `<div class="number-cell empty-cell"></div>`;
                });
                
                cardEl.innerHTML = `
                    <div class="card-header">Card #${card.id}</div>
                    <div class="card-grid">
                        ${gridHTML}
                    </div>
                `;
                
                container.appendChild(cardEl);
            });
        }
        
        // Load winners page
        function loadWinnersPage() {
            const container = document.getElementById('winners-list');
            container.innerHTML = '';
            
            gameState.winners.forEach(winner => {
                const winnerEl = document.createElement('div');
                winnerEl.className = 'tonbolla-card';
                winnerEl.style.margin = '10px auto';
                winnerEl.style.maxWidth = '500px';
                
                winnerEl.innerHTML = `
                    <div style="display: flex; justify-content: space-between;">
                        <div>${winner.address}</div>
                        <div style="font-weight: bold;">${winner.prize}</div>
                    </div>
                `;
                
                container.appendChild(winnerEl);
            });
        }
        
        // Update UI based on current state
        function updateUI() {
            const lang = gameState.language;
            const t = translations[lang];
            
            // Update wallet info
            if (gameState.walletConnected) {
                document.getElementById('connect-wallet').textContent = t.wallet.connected;
                document.getElementById('wallet-amount').textContent = 
                    t.wallet.balance.replace('{balance}', gameState.tonBalance);
            } else {
                document.getElementById('connect-wallet').textContent = t.wallet.connect;
                document.getElementById('wallet-amount').textContent = '0 TON';
            }
            
            // Update page titles
            document.getElementById('buy-cards-page').querySelector('.page-title').textContent = t.buyCards.title;
            document.getElementById('show-cards-page').querySelector('.page-title').textContent = t.showCards.title;
            document.getElementById('winners-page').querySelector('.page-title').textContent = t.winners.title;
            document.getElementById('invite-page').querySelector('.page-title').textContent = t.invite.title;
            document.getElementById('game-play-page').querySelector('.page-title').textContent = t.game.title;
            
            // Update timer label
            if (document.querySelector('.timer-label')) {
                document.querySelector('.timer-label').textContent = t.timer;
            }
            
            // Update invite page
            if (document.querySelector('#invite-page p')) {
                document.querySelector('#invite-page p').textContent = t.invite.description;
            }
            
            // Update button titles
            document.getElementById('home-btn').title = t.menu.home;
            document.getElementById('buy-card-btn').title = t.menu.buyCard;
            document.getElementById('show-cards-btn').title = t.menu.showCards;
            document.getElementById('winners-btn').title = t.menu.winners;
            document.getElementById('invite-btn').title = t.menu.invite;
            document.getElementById('play-button').title = t.menu.play;
            document.getElementById('task-btn').title = t.menu.task;
            
            // Update invite stats
            updateInviteStats();
        }
        
        // Start the app when page loads
        window.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
